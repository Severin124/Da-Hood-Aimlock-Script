
 ██████      ██      ██████  ███    ██ ███    ███ 
██    ██     ██           ██ ████   ██ ████  ████ 
██ ██ ██     ██       █████  ██ ██  ██ ██ ████ ██ 
██ ██ ██     ██      ██      ██  ██ ██ ██  ██  ██ 
 █ ████      ███████ ███████ ██   ████ ██      ██ 
                                                  
                                                  

local UIS = game:GetService("UserInputService") -- made by @l2nm (severin)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Camera = game.Workspace.CurrentCamera
local AimlockButton = script.Parent:WaitForChild("Aimlock")

-- you can edit this 
local Epitaph = 0.234
local HeadOffset = Vector3.new(0, 0.1, 0)
local AimPart = "HumanoidRootPart"
local CircleRadius = 200
local CircleColor = Color3.fromRGB(255, 0, 130)
local CircleThickness = 1
local CircleSides = 64
local CircleFilled = false
local CircleVisible = true
local CircleTransparency = 0


local FOVCircle = Drawing.new("Circle")
FOVCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
FOVCircle.Radius = CircleRadius
FOVCircle.Color = CircleColor
FOVCircle.Thickness = CircleThickness
FOVCircle.NumSides = CircleSides
FOVCircle.Filled = CircleFilled
FOVCircle.Visible = CircleVisible
FOVCircle.Transparency = CircleTransparency


local isAimlockActive = false
local isHoldingMouseButton = false


local function lockCursor()
    UIS.MouseBehavior = Enum.MouseBehavior.LockCenter
end

local function unlockCursor()
    UIS.MouseBehavior = Enum.MouseBehavior.Default
    isAimlockActive = false
    isHoldingMouseButton = false
end

local function findNearestPlayer()
    local closestPlayer = nil
    local shortestDistance = math.huge

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid and humanoid.Health > 0 then
                local screenPos, visible = Camera:WorldToViewportPoint(player.Character[AimPart].Position)
                if visible then
                    local distance = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(screenPos.X, screenPos.Y)).Magnitude
                    if distance < shortestDistance and distance < CircleRadius then
                        shortestDistance = distance
                        closestPlayer = player.Character
                    end
                end
            end
        end
    end
    return closestPlayer
end

local function onAimlockButtonClicked()
    isAimlockActive = not isAimlockActive
    if isAimlockActive then
        isHoldingMouseButton = true
        lockCursor()
        RunService.RenderStepped:Connect(function()
            if isHoldingMouseButton then
                local target = findNearestPlayer()
                if target then
                    local predictedPosition = target[AimPart].Position + (target[AimPart].Velocity * Epitaph + HeadOffset)
                    Camera.CFrame = CFrame.lookAt(Camera.CFrame.Position, predictedPosition)
                end
            end
        end)
    else
        unlockCursor()
    end
end

-- Connections
AimlockButton.MouseButton1Click:Connect(onAimlockButtonClicked)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        unlockCursor()
    end
end)


game.StarterGui:SetCore("SendNotification", {
    Title = "script chairto", -- aq rac ginda daawere
    Text = "auwvi exla xalxs ha.", -- aqac
    Duration = 4,
})
